<template name='play'>
	<header class="top-menu">
    Play a Game
    {{#if currentUser}}
			{{> status game}}
		{{/if}}
    <span class="user-info">
      {{> signupLogin}}
    </span>
  </header>

	{{#if currentUser}}
		{{#if game.inProgress}}
		<div class="game">
		<section id="opponent_hand" class="hidden-hand">
	    <ul class="cards">
	    	{{#each game.otherPlayer.player.hand}}
	      	<li class="card">
	      	</li>
	      {{/each}}
	    </ul>
      {{#if game.yourTurn}}
        <div class="end-turn">
          <button class="end-turn-button">END TURN</button>
        </div>
      {{/if}}
	  </section>
	  
	  <section class="board">
	  	<section class="opponent-flour-bar">
	  		{{> flourBar game.otherPlayer.player}}
	  	</section>
	    <section id="opponent_spells" class="opponent-spells">
	    	{{> spells game.otherPlayer.player}}
	    </section>
	    <section id="opponent_board" class="board-side">
	      {{> table game.otherPlayer.player}}
	    </section>
	    <section id="my_board" class="board-side">
				{{> table game.player}}
			</section>
			<section id="my_spells" class="my-spells">
				{{> spells game.player}}
		  </section>
		  <section class="my-flour-bar">
		  	{{> flourBar game.player}}
		  </section>
		</section>
		  
	  <div class="deck my-deck">
      {{game.player.deck.length}}
    </div>

    <div class="deck opponent-deck">
      {{game.otherPlayer.player.deck.length}}
    </div>
	  
	  <section id="my_hand" class="visible-hand">
	    {{> hand game.player}}
	    
	  </section>
		</div>
		{{else}}
			Game is not in progress
		{{/if}}
	{{/if}}
</template>

<template name="spells">
	{{#each spells}}
		<div class="spell {{playableClass}}">
	    <img class="spell-art" src="{{art}}">
	    <div class="spell-border"></div>
	    <span class="cost">{{cost}}</span>
	  </div>
	{{/each}}
</template>

<template name="status">
	<a href="/">Home</a>
	<span class="status">
		Currently Playing {{otherPlayer.username}} {{#if inProgress}} {{#if yourTurn}} (Your Turn) {{/if}} {{/if}}
	</span>
</template>

<template name="table">
	<ul class="cards">
		{{#each board}}
			{{> boardCard}}
		{{/each}}
	</ul>
</template>

<template name="hand">
	<ul class="cards cards-{{hand.length}}">
		{{#each hand}}
			{{> handCard}}
		{{/each}}
	</ul>
</template>

<template name="boardCard">
	<li class="card {{championClass}} {{canAttackClass}}">
    <img class="card-art" src="{{ art }}">
    <div class="card-border"></div>
		<span class="health">{{ health }}</span>
		<span class="attack">{{ attack }}</span>
  </li>
</template>

<template name="handCard">
	{{#Animate}}
		<li class="card-container animate">
      <div class="card {{playableClass}}">
        <img class="card-art" src="{{ art }}">
        <span class="health">{{ health }}</span>
        <span class="attack">{{ attack }}</span>
        <span class="name">{{ name }}</span>
        <span class="cost">{{ cost }}</span>
        <span class="description">{{ description }}</span>
      </div>
	  </li>
  {{/Animate}}
</template>

<template name="flourBar">
	<div class="flour-bar-top"></div>
  <div class="flour-bar" style="height: {{maxBarHeight}}px;">
  	<div class="flour-bar-level" style="height: {{currentBarHeight}}px"></div>
  	<div class="flour-bar-glass"></div>
  </div>
  <div class="flour-bar-bottom"></div>
</template>